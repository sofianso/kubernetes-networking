# Purpose
To have AUTH, USERS, and TASKS API run independently in their own pods. 

## Auth-Service
For `auth-service` we do not want to expose the IP to `LoadBalancer` since we do not want anyone from outside the reach this service. Instead, we want to use `auth-service` to expose `CluserIP`

## Apply New Config Files
We then need to apply the new config files using the following:

`kubectl apply -f=auth-service.yaml -f=auth-deployment.yaml`

Once completed, get the IP address of the `CluserIP` by running:
`kubectl get service`

Copy ClusterIP from `auth-service`: 
`10.xx.xxx.xxx`

NOTE: Don't forget to apply the new deployment settings
`kubectl apply -f=users-deployment.yaml`

## Adds AUTH_ADDRESS_SERVICE_HOST Config
`AUTH_ADDRESS_SERVICE_HOST` is dynamically auto=generated by Kubernetes. In this example, it allows USERS-API to use a dynamic IP address to host the environment.

You need to rebuild Docker image:
`docker build -t sofianso/kube-demo-users .`

And then push:
`docker push sofianso/kube-demo-users` 

You will also need to reapply the settings by running:
`kubectl apply -f=users-deployment.yaml`

NOTE: It's recommended that you delete it before reapplying it again:
`kubectl delete -f=users-deployment.yaml`
